<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Liu's Blog</title><meta name="author" content="Liu"><meta name="copyright" content="Liu"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta property="og:type" content="website">
<meta property="og:title" content="Liu&#39;s Blog">
<meta property="og:url" content="http://liuduix.github.io/index.html">
<meta property="og:site_name" content="Liu&#39;s Blog">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://npm.elemecdn.com/liuduix-test1/img/avatars/avator.png">
<meta property="article:author" content="Liu">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://npm.elemecdn.com/liuduix-test1/img/avatars/avator.png"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="http://liuduix.github.io/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":190},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Liu\'s Blog',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2023-01-12 17:44:49'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/hexo-electric-clock@1.0.6/clock.css"><link rel="stylesheet" href="https://npm.elemecdn.com/liuduix-test1@1.0.2/css/clock.min.css" /><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.2.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://npm.elemecdn.com/liuduix-test1/img/avatars/avator.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">11</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">18</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">14</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('/url('https:/npm.elemecdn.com/liuduix-test1/img/bg/bg01.jpg')')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Liu's Blog</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">Liu's Blog</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/liuduix" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:immaster74@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2023/01/12/zJiQJ3wQymv/" title="自建代理服务器（Cross The GFW）脚本与常见问题解决方案"><img class="post_bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/postcover/zJiQJ3wQymv.png" onerror="this.onerror=null;this.src='https://npm.elemecdn.com/liuduix-test1/img/loading/loading02.gif'" alt="自建代理服务器（Cross The GFW）脚本与常见问题解决方案"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/01/12/zJiQJ3wQymv/" title="自建代理服务器（Cross The GFW）脚本与常见问题解决方案">自建代理服务器（Cross The GFW）脚本与常见问题解决方案</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-01-12T22:16:25.000Z" title="发表于 2023-01-12 22:16:25">2023-01-12</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Proxy/">Proxy</a></span></div><div class="content">自建代理服务器没有啥其他优势，两个字「安全」。另外，如果你没有找到比较好一点的节点（一般免费的节点经常变动以提升网站流量），那么自建就是不错的选择，如果钱包充足，你可以在你的软路由上设置你自建的代理，当然这种方式需要代理服务器一直开着（如果选择的是 Vultr，目前最低配置 「1 Core 1 GB  2TB」一个月 6$），具体怎么自建在下面推荐的网站，这儿主要是记录脚本和一些常用的问题解决方案。
1. 推荐阅读
一灯不是和尚：https://iyideng.net/

了解高效上网的前世今生以及如何自建和配置服务器


灯得：https://getdeng.com/

好用节点分享


官方文档与各种协议说明：https://www.v2fly.org/


2. 脚本1bash &lt;(curl -s -L https://git.io/v2ray.sh)
3. 代理模式
推荐阅读：
12&gt;https://baiyunju.cc/7285&gt;https://vimcaw.github.io/blog/2018/03/12/Shadowsocks(R)%E8%AE%BE ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/01/11/hP4jF5hZ9o/" title="Windows 多 JDK 配置（带环境变量配置失效方案）"><img class="post_bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/postcover/hP4jF5hZ9o.png" onerror="this.onerror=null;this.src='https://npm.elemecdn.com/liuduix-test1/img/loading/loading02.gif'" alt="Windows 多 JDK 配置（带环境变量配置失效方案）"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/01/11/hP4jF5hZ9o/" title="Windows 多 JDK 配置（带环境变量配置失效方案）">Windows 多 JDK 配置（带环境变量配置失效方案）</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-01-11T20:22:18.000Z" title="发表于 2023-01-11 20:22:18">2023-01-11</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/JDK/">JDK</a></span></div><div class="content"> 有些时候，我们需要在电脑上安装多个板本的 JDK ，以适应不同板本的开发需求，同时部份软件需要指定的某个板本的 JDK 才能运行，一般这个时候我们也不想卸载原本的 JDK 再去安装新的，这时就需要对 JDK 进行一种方便的管理（通过改变环境变量）。

写这篇文章的起因是因为我在 Idea 中运行基于 JDK 1.8 的项目时没有问题，因为在Project Structure 中配置了 JDK 的目录，而改为使用java -jar xxx.jar方式运行时，

报错：
1java.lang.NoClassDefFoundError: javax/xml/bind/DatatypeConverter

原因：
Java SE 9 及以上移除了 JAXB API（属于 JAVA EE API），因此对应的 JDK 也不再包含相关 jar 包，而我本地虽然配置的是 JDK 8 的环境变量，但是使用java -version 显示的是 jdk 11 板本，配置失效。

解决：
第一种方式：pom.xml 文件中，加入这些被移除的相关包。
1234567891011121314151617181 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/01/09/mcxjgmqfSqf/" title="云服务器安全（SSH,SSL VPN）"><img class="post_bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/postcover/ssh.png" onerror="this.onerror=null;this.src='https://npm.elemecdn.com/liuduix-test1/img/loading/loading02.gif'" alt="云服务器安全（SSH,SSL VPN）"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/01/09/mcxjgmqfSqf/" title="云服务器安全（SSH,SSL VPN）">云服务器安全（SSH,SSL VPN）</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-01-09T14:06:39.000Z" title="发表于 2023-01-09 14:06:39">2023-01-09</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/ssh/">ssh</a></span></div><div class="content"> 在使用云服务器的过程中，我们一般会做一些配置来提高云服务器的安全，下面开始操作：
1. 修改 root 密码
修改 root 密码；
1passwd root # 修改 root 用户密码

修改 root 用户名（不推荐，sudo 提权时会找不到 root 用户）。
12vim /etc/passwd # 修改第一行第一个 root 为新的用户名vim /etc/shadow # 修改第一行第一个 root 为新的用户名


2. 添加一个普通管理员
查看 root 账户所属权限组；
1id root # 查看 root 用户所属权限组（root，对应的 gid 为 0）

误区更新：把普通用户加入 root 权限组并不会具有 root 权限


创建一个普通管理员用户；
1useradd -g wheel -m username 
另一种方式（不推荐）：
1useradd -o -u 0 -g 0 -m username
1234567# -m 指定在 /home 下创建用户主目录,# -g 指定初始组（可以是 gid 或者 组名）# -o 必须和 -u 一起使用，指定 uid， ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/01/03/qgYscrzqK8/" title="时间复杂度与空间复杂度"><img class="post_bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/postcover/bigO.png" onerror="this.onerror=null;this.src='https://npm.elemecdn.com/liuduix-test1/img/loading/loading02.gif'" alt="时间复杂度与空间复杂度"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/01/03/qgYscrzqK8/" title="时间复杂度与空间复杂度">时间复杂度与空间复杂度</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-01-03T13:06:27.000Z" title="发表于 2023-01-03 13:06:27">2023-01-03</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%AE%97%E6%B3%95/">算法</a></span></div><div class="content">最近在学习数据结构与算法，发现对于算法的时间和空间复杂度一直处于一个比较懵懂的状态，所以专门写一下来理清楚这两个概念。在这之前，我们需要先了解一些基本概念。
1. 基本概念与术语1.1 数据结构
在计算机中，数据并不是孤立、杂乱无序的，而是具有内在联系的数据集合。数据之间存在的一种或多种特定关系，也就是数据的组织形式；
数据结构是指相互之间存在一种或多种特定关系的数据元素的集合；
简单的理解就是关系，比如分子结构；
我们分析这些关系的目的就是为了编写出一个 “好” 的程序。

按照视点的不同，我们一般把数据结构分为「逻辑结构」和「物理结构」。
1.2 逻辑结构逻辑结构是指数据元素之间的相互关系，分为以下四种。每个数据元素看为一个节点，如下面图中的①~⑨。
1.2.1 集合结构集合结构中的数据元素除了同属于一个集合外，它们之间没有其他关系，类似于数学中的集合。

1.2.2 线性结构线性结构中的数据元素之间是「一对一」的关系。

1.2.3 树型结构树形结构中的数据元素之间存在一种「一对多」的层次关系。

1.2.4 图型结构图形结构的数据元素是「多对多」的关系。

1.3 物理结构物理 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/12/18/A8pseyMAQD/" title="函数式编程学习"><img class="post_bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/postcover/programming-technology.png" onerror="this.onerror=null;this.src='https://npm.elemecdn.com/liuduix-test1/img/loading/loading02.gif'" alt="函数式编程学习"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/12/18/A8pseyMAQD/" title="函数式编程学习">函数式编程学习</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-12-18T00:58:07.000Z" title="发表于 2022-12-18 00:58:07">2022-12-18</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/">函数式编程</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/JDK8/">JDK8</a></span></div><div class="content">1. 介绍1.1 概念
函数式编程是一种抽象度很高的「编程范式」，属于「结构化编程」的一种，除它之外，还有命令式编程，声明式编程；
函数式编程像是“流水线”，允许我们将数据和处理逻辑封装到函数中，将函数作为基本运算单元，并且将这个函数本身作为参数传入另外一个函数的同时还返回一个函数（balalala）；
函数式编程的基础是 lambda 计算，它的关注点是运算过程，也就是对数据做了什么操作；
我们经常把支持函数式编程的编码风格称为 Lambda 表达式，Java平台从 Java 8 开始，引入了 lambda 表达式 和 Stream API。

1.2 特点
闭包和高阶函数：函数式编程支持将函数作为第一类对象（函数本身与其他数据类型一样，可以赋值给其他变量，也可以将其作为参数传递给其他函数），在某些情况下甚至允许返回一个函数作为其参数；

惰性计算：也叫惰性求值、延迟求值，是一种软件设计和架构设计思想，核心：少做无用功，等真正需要的时候才计算，节约内存开支，提升性能；

递归：函数式编程用用递归做为控制流程的机制，递归算法是一种典型的函数式编程案例；
举个栗子：已知数列 1、1、2、 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/12/14/PNGPtqI7TSsy/" title="Maven 多镜像源配置"><img class="post_bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/postcover/violin-girl.png" onerror="this.onerror=null;this.src='https://npm.elemecdn.com/liuduix-test1/img/loading/loading02.gif'" alt="Maven 多镜像源配置"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/12/14/PNGPtqI7TSsy/" title="Maven 多镜像源配置">Maven 多镜像源配置</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-12-14T22:57:21.000Z" title="发表于 2022-12-14 22:57:21">2022-12-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Maven/">Maven</a></span></div><div class="content">此篇文章主要用于备份 maven 配置，以下配置文件可直接复制后修改 Maven 的仓库地址即可，可以解决部份包无法获取的问题。
步骤找到 Maven 的配置文件settings.xml，将其替换为以下文件，修改本地仓库地址。
12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;settings xmlns=&quot;http://maven.apache.org/SETTINGS/1.0.0&quot;          xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;        ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/12/14/DACZKCX9iu/" title="Docker部署Canal实践"><img class="post_bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/postcover/wukong.png" onerror="this.onerror=null;this.src='https://npm.elemecdn.com/liuduix-test1/img/loading/loading02.gif'" alt="Docker部署Canal实践"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/12/14/DACZKCX9iu/" title="Docker部署Canal实践">Docker部署Canal实践</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-12-14T13:14:22.000Z" title="发表于 2022-12-14 13:14:22">2022-12-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Docker/">Docker</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Docker/Canal/">Canal</a></span></div><div class="content">Canal官网地址：https://github.com/alibaba/canal
什么是 Canel官方介绍：

canal ，译意为水道/管道/沟渠，主要用途是基于 MySQL 数据库增量日志解析，提供增量数据订阅和消费



Canal 是一个同步增量数据的一个工具，可以很方便的同步数据库的增量数据到其他存储应用；
Canal 基于binary log 增量订阅和消费；
Canal 的数据同步不是全量的，而是增量。

Canal 能做什么
数据库镜像；
数据库实时备份；
索引构建和实时维护；
业务 cache（缓存）刷新；
带业务逻辑的增量数据处理。

Canal 工作原理
canal 模拟 MySQL slave 的交互协议，伪装自己为 MySQL slave ，向 MySQL master 发送dump 请求；
MySQL master 收到 dump 请求，开始推送 binary log 给 slave ( 即 canal )；
canal 解析 binary log 对象，将其发送到存储目的地。

实践在虚拟机中安装 Docker（参照官网安装），Docker 中安装  ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/12/05/ZvjgayamzL/" title="idea 完全迁移"><img class="post_bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/postcover/IntelliJ-IDEA.png" onerror="this.onerror=null;this.src='https://npm.elemecdn.com/liuduix-test1/img/loading/loading02.gif'" alt="idea 完全迁移"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/12/05/ZvjgayamzL/" title="idea 完全迁移">idea 完全迁移</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-12-05T11:45:19.000Z" title="发表于 2022-12-05 11:45:19">2022-12-05</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/idea/">idea</a></span></div><div class="content">备份
将 idea 的配置导出到一个目录备份
File-&gt;Manage IDE Settings-&gt;Export Settings，弹出对话框保存 settings.zip 文件


将 idea 的插件目录 myplugins 复制备份（插件目录名不能是 plugins）


迁移在重新安装 idea 时，有时会弹出「使用已有的配置」打开还是自己配置，这一步选择自己配置，完成安装后关闭 idea

将上面保存的插件目录 myplugins 复制到 idea 安装目录下

idea 原本的安装路径中有一个 plugins 文件夹，这是 idea 自带绑定的插件目录，不要将自己下载的插件放在这里，如果你没有修改过 idea 存储插件的位置，那么默认下载插件的位置可查看 idea bin 目录下 idea.properties 中的「idea.plugins.path」


修改 idea bin 目录下 idea.properties，添加或修改如下内容，修改默认的配置、缓存、插件、日志目录
12345678910111213141516idea.config.path=D: ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/07/01/rH4YuaYi2C/" title="Docker下的MYSQL主从复制"><img class="post_bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/transparent" onerror="this.onerror=null;this.src='https://npm.elemecdn.com/liuduix-test1/img/loading/loading02.gif'" alt="Docker下的MYSQL主从复制"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/07/01/rH4YuaYi2C/" title="Docker下的MYSQL主从复制">Docker下的MYSQL主从复制</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-07-01T21:03:46.000Z" title="发表于 2022-07-01 21:03:46">2022-07-01</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/MYSQL/">MYSQL</a></span></div><div class="content">环境阿里云服务器：CentOS 7.9
本地：Windows 10 64
MYSQL：8.0.x
步骤
创建 msyql 实例 master，映射端口 3307；
12345docker run -p 3307:3306 --name=&quot;mysql-master&quot; \-v /mydata/mysql-master/log:/var/log/mysql \-v /mydata/mysql-master/data:/var/lib/mysql \-v /mydata/mysql-master/conf:/etc/mysql/conf.d \-e MYSQL_ROOT_PASSWORD=123456 -d mysql

启动错误：WARNING: IPv4 forwarding is disabled. Networking will not work
没有开启转发,docker网桥配置完后，需要开启转发，不然容器启动后，就会没有网络；
解决方案：

vim /etc/sysctl.conf
添加如下配置项；
1net.ipv4.ip_forward=1

重启 netw ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/06/30/frp/" title="frp 内网穿透"><img class="post_bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/frp.png" onerror="this.onerror=null;this.src='https://npm.elemecdn.com/liuduix-test1/img/loading/loading02.gif'" alt="frp 内网穿透"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/06/30/frp/" title="frp 内网穿透">frp 内网穿透</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-06-30T23:27:16.000Z" title="发表于 2022-06-30 23:27:16">2022-06-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/frp/">frp</a></span></div><div class="content">简介官网文档地址：https://gofrp.org/docs/overview/
GitHub：https://github.com/fatedier/frp/releases
frp 是一个专注于内网穿透的高性能的反向代理应用，支持 TCP、UDP、HTTP、HTTPS 等多种协议。可以将内网服务以安全、便捷的方式通过具有公网 IP 节点的中转暴露到公网；
systemd 后台启动及开机自启环境：

云服务器：centOS 7.9；
被穿透主机（本机）：windows 10 64；

步骤：

服务端下载文件frp_0.43.0_linux_amd64.tar.gz，解压到/usr/local/frp文件夹下，并删除frpc开头的文件（服务端不需要）；

如果Linux服务端上没有安装 systemd，可以使用 yum 或 apt 等命令安装 systemd；
1234# yumyum install systemd# aptapt install systemd

编辑 frps.service 文件，修改配置中的 frp 安装路径；
1vim /etc/systemd/syst ...</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/#content-inner">2</a><a class="extend next" rel="next" href="/page/2/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://npm.elemecdn.com/liuduix-test1/img/avatars/avator.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Liu</div><div class="author-info__description">平安喜乐 四季如春</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">11</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">18</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">14</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/LiuDuix"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/liuduix" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:immaster74@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/01/12/zJiQJ3wQymv/" title="自建代理服务器（Cross The GFW）脚本与常见问题解决方案"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/postcover/zJiQJ3wQymv.png" onerror="this.onerror=null;this.src='https://npm.elemecdn.com/liuduix-test1/img/loading/loading02.gif'" alt="自建代理服务器（Cross The GFW）脚本与常见问题解决方案"/></a><div class="content"><a class="title" href="/2023/01/12/zJiQJ3wQymv/" title="自建代理服务器（Cross The GFW）脚本与常见问题解决方案">自建代理服务器（Cross The GFW）脚本与常见问题解决方案</a><time datetime="2023-01-12T22:16:25.000Z" title="发表于 2023-01-12 22:16:25">2023-01-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/01/11/hP4jF5hZ9o/" title="Windows 多 JDK 配置（带环境变量配置失效方案）"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/postcover/hP4jF5hZ9o.png" onerror="this.onerror=null;this.src='https://npm.elemecdn.com/liuduix-test1/img/loading/loading02.gif'" alt="Windows 多 JDK 配置（带环境变量配置失效方案）"/></a><div class="content"><a class="title" href="/2023/01/11/hP4jF5hZ9o/" title="Windows 多 JDK 配置（带环境变量配置失效方案）">Windows 多 JDK 配置（带环境变量配置失效方案）</a><time datetime="2023-01-11T20:22:18.000Z" title="发表于 2023-01-11 20:22:18">2023-01-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/01/09/mcxjgmqfSqf/" title="云服务器安全（SSH,SSL VPN）"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/postcover/ssh.png" onerror="this.onerror=null;this.src='https://npm.elemecdn.com/liuduix-test1/img/loading/loading02.gif'" alt="云服务器安全（SSH,SSL VPN）"/></a><div class="content"><a class="title" href="/2023/01/09/mcxjgmqfSqf/" title="云服务器安全（SSH,SSL VPN）">云服务器安全（SSH,SSL VPN）</a><time datetime="2023-01-09T14:06:39.000Z" title="发表于 2023-01-09 14:06:39">2023-01-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/01/03/qgYscrzqK8/" title="时间复杂度与空间复杂度"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/postcover/bigO.png" onerror="this.onerror=null;this.src='https://npm.elemecdn.com/liuduix-test1/img/loading/loading02.gif'" alt="时间复杂度与空间复杂度"/></a><div class="content"><a class="title" href="/2023/01/03/qgYscrzqK8/" title="时间复杂度与空间复杂度">时间复杂度与空间复杂度</a><time datetime="2023-01-03T13:06:27.000Z" title="发表于 2023-01-03 13:06:27">2023-01-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/12/18/A8pseyMAQD/" title="函数式编程学习"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/postcover/programming-technology.png" onerror="this.onerror=null;this.src='https://npm.elemecdn.com/liuduix-test1/img/loading/loading02.gif'" alt="函数式编程学习"/></a><div class="content"><a class="title" href="/2022/12/18/A8pseyMAQD/" title="函数式编程学习">函数式编程学习</a><time datetime="2022-12-18T00:58:07.000Z" title="发表于 2022-12-18 00:58:07">2022-12-18</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            <a class="card-more-btn" href="/categories/" title="查看更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Docker/"><span class="card-category-list-name">Docker</span><span class="card-category-list-count">1</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Docker/Canal/"><span class="card-category-list-name">Canal</span><span class="card-category-list-count">1</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Hexo/"><span class="card-category-list-name">Hexo</span><span class="card-category-list-count">1</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Hexo/%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E5%8A%A0%E9%80%9F/"><span class="card-category-list-name">静态资源加速</span><span class="card-category-list-count">1</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/JDK/"><span class="card-category-list-name">JDK</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/MYSQL/"><span class="card-category-list-name">MYSQL</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Maven/"><span class="card-category-list-name">Maven</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Proxy/"><span class="card-category-list-name">Proxy</span><span class="card-category-list-count">1</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/" style="font-size: 1.15em; color: rgb(65, 189, 117)">函数式编程</a><a href="/tags/JDK8/" style="font-size: 1.15em; color: rgb(170, 182, 129)">JDK8</a><a href="/tags/Docker/" style="font-size: 1.45em; color: rgb(71, 37, 15)">Docker</a><a href="/tags/Canal/" style="font-size: 1.15em; color: rgb(30, 163, 95)">Canal</a><a href="/tags/Maven/" style="font-size: 1.15em; color: rgb(181, 11, 36)">Maven</a><a href="/tags/idea/" style="font-size: 1.15em; color: rgb(106, 111, 189)">idea</a><a href="/tags/frp/" style="font-size: 1.15em; color: rgb(168, 42, 194)">frp</a><a href="/tags/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/" style="font-size: 1.15em; color: rgb(3, 132, 195)">内网穿透</a><a href="/tags/JDK/" style="font-size: 1.15em; color: rgb(69, 112, 144)">JDK</a><a href="/tags/ssh-vpn/" style="font-size: 1.15em; color: rgb(106, 15, 96)">ssh,vpn</a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 1.15em; color: rgb(85, 137, 51)">算法</a><a href="/tags/MYSQL/" style="font-size: 1.15em; color: rgb(148, 92, 146)">MYSQL</a><a href="/tags/%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/" style="font-size: 1.15em; color: rgb(45, 31, 91)">主从复制</a><a href="/tags/Proxy/" style="font-size: 1.15em; color: rgb(148, 67, 147)">Proxy</a><a href="/tags/hexo/" style="font-size: 1.15em; color: rgb(153, 119, 137)">hexo</a><a href="/tags/%E6%95%99%E7%A8%8B/" style="font-size: 1.15em; color: rgb(6, 82, 25)">教程</a><a href="/tags/npm/" style="font-size: 1.15em; color: rgb(155, 27, 116)">npm</a><a href="/tags/cdn/" style="font-size: 1.15em; color: rgb(76, 64, 32)">cdn</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/01/"><span class="card-archive-list-date">一月 2023</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/12/"><span class="card-archive-list-date">十二月 2022</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/07/"><span class="card-archive-list-date">七月 2022</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/06/"><span class="card-archive-list-date">六月 2022</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/05/"><span class="card-archive-list-date">五月 2022</span><span class="card-archive-list-count">1</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">11</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2022-03-16T00:00:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">17k</div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2023-01-12T17:44:49.385Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2023 By Liu</div><div class="footer_custom_text"><p> <a style="margin-inline:5px"target="_blank" href="https://hexo.io/"> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&logo=hexo" title="博客框架为 Hexo" alt="HEXO"> </a>&nbsp; <a style="margin-inline:5px"target="_blank" href="https://butterfly.js.org/"> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&logo=bitdefender" title="主题采用 Butterfly" alt="Butterfly"> </a>&nbsp; <a style="margin-inline:5px"target="_blank" href="https://github.com/"> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&logo=GitHub" title="本站项目由 GitHub 托管" alt="GitHub"> </a>&nbsp; <a style="margin-inline:5px"target="_blank"href="http://creativecommons.org/licenses/by-nc-sa/4.0/"> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&logo=Claris" alt="img" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"> </a> </p></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://npm.elemecdn.com/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function subtitleType () {
  if (true) { 
    window.typed = new Typed("#subtitle", {
      strings: ["出发，永远是最有意义的事","我与春风皆过客，你携秋水揽星河","摇曳自西东，依林又逐风","势移青道里，影泛绿波中"],
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50
    })
  } else {
    document.getElementById("subtitle").innerHTML = '出发，永远是最有意义的事'
  }
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://npm.elemecdn.com/typed.js/lib/typed.min.js').then(subtitleType)
  }
} else {
  subtitleType()
}</script></div><script defer src="https://cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js"></script><div class="aplayer no-destroy no-reload aplayer-withlist aplayer-fixed" data-id="7464902660" data-server="netease" data-type="playlist" data-fixed="true" data-mini="true" data-listfolded="false" data-preload="none" data-autoplay="false" data-order="random" muted></div><link rel="stylesheet" href="https://npm.elemecdn.com/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://npm.elemecdn.com/aplayer/dist/APlayer.min.js"></script><script src="https://npm.elemecdn.com/meting@1.2/dist/Meting.min.js"></script><script src="https://npm.elemecdn.com/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script data-pjax>function electric_clock_injector_config(){
                var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
                var item_html = 'undefined';
                console.log('已挂载electric_clock')
                // parent_div_git.innerHTML=item_html+parent_div_git.innerHTML // 无报错，但不影响使用(支持pjax跳转)
                parent_div_git.insertAdjacentHTML("afterbegin",item_html) // 有报错，但不影响使用(支持pjax跳转)
            }if( document.getElementsByClassName('sticky_layout')[0] && (location.pathname ==='all'|| 'all' ==='all')){

            electric_clock_injector_config()
        } </script><script src="https://pv.sohu.com/cityjson?ie=utf-8"></script><script data-pjax  src="https://cdn.jsdelivr.net/gh/Zfour/hexo-electric-clock@1.0.6/clock.js"></script><script data-pjax>
  function butterfly_clock_injector_config(){
    var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
    var item_html = '<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img class="entered loading" id="card-clock-loading" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://npm.elemecdn.com/hexo-butterfly-clock/lib/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading"/></div></div></div></div></div>';
    console.log('已挂载butterfly_clock')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = '/posts/,/about/'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_clock_injector_config();
  }
  else if (epage === cpage){
    butterfly_clock_injector_config();
  }
  </script><script src="https://pv.sohu.com/cityjson?ie=utf-8"></script><script data-pjax src="https://npm.elemecdn.com/hexo-butterfly-clock/lib/clock.min.js"></script><script async src="//at.alicdn.com/t/font_2032782_8d5kxvn09md.js"></script><!-- hexo injector body_end end --><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"left","width":150,"height":300,"hOffset":1,"vOffset":-15},"mobile":{"show":true},"react":{"opacity":1},"log":false});</script></body></html>